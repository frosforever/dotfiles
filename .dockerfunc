# To get bash completion for docker beta use
# find /Applications/Docker.app -type f -name "*.bash-completion" -exec ln -s "{}" "$(brew --prefix)/etc/bash_completion.d/" \;

awslogs() {
    docker run -it --rm \
      -e AWS_DEFAULT_REGION=eu-west-1 \
      -v ~/.aws/:/root/.aws:ro \
      frosforever/awslogs "$@"
}

# https://github.com/frosforever/saws
saws() {
    docker run --rm -it \
      -v ~/.aws/:/root/.aws:ro \
      frosforever/saws
}

# Fixes clock skew in xhyve host on machine wake
# See https://docs.docker.com/docker-for-mac/troubleshoot/#/known-issues
docker-clock-fix() {
    docker run --rm \
      --privileged alpine hwclock -s
}

# Set up IP alias so that host can be accessed from inside a container.
# See https://forums.docker.com/t/access-host-not-vm-from-inside-container/11747/37
docker-host-alias() {
  ifconfig lo0 | grep 10.0.2.2 >/dev/null
  if [ $? -ne 0 ]; then
    sudo ifconfig lo0 alias 10.0.2.2
    echo "docker host alias (10.0.2.2) set up and ready to use."
  else
    echo "docker host alias (10.0.2.2) is in good shape. Move along."
  fi
}
